<div class="highlight"><pre><span class="k">class</span> <span class="nc">Ability</span>
  <span class="kp">include</span> <span class="ss">CanCan</span><span class="p">:</span><span class="ss">:Ability</span>

  <span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="n">user</span><span class="p">)</span>
    <span class="n">user</span> <span class="o">||=</span> <span class="no">User</span><span class="o">.</span><span class="n">new</span>

    <span class="k">if</span> <span class="n">user</span><span class="o">.</span><span class="n">role?</span><span class="p">(</span><span class="ss">:admin</span><span class="p">)</span>
      <span class="n">can</span> <span class="ss">:manage</span><span class="p">,</span> <span class="no">Resource</span>
    <span class="k">elsif</span> <span class="n">user</span><span class="o">.</span><span class="n">role?</span><span class="p">(</span><span class="ss">:employee</span><span class="p">)</span>
      <span class="n">can</span> <span class="ss">:update</span><span class="p">,</span> <span class="no">Resource</span>
    <span class="k">else</span>
      <span class="n">can</span> <span class="ss">:read</span><span class="p">,</span> <span class="no">Resource</span>
    <span class="k">end</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre></div>